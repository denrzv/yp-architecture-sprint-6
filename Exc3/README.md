# Анализ архитектуры Insure Tech

## Текущие проблемы:
* Задержки и ошибки при взаимодействии с API страховых компаний.
* Нагрузочное обращение к ins-product-aggregator раз в 15 минут и раз в сутки.
* Механизм синхронного запроса ins-product-aggregator к страховым компаниям создает узкое место.
* Усложнение системы при увеличении числа страховых компаний.

## Потенциальные риски:
* Увеличение времени ответа при добавлении новых компаний, потенциал для каскадных сбоев.
* Рост нагрузки на ins-product-aggregator из-за дополнительных компаний.
* Риск недоступности данных для core-app и ins-comp-settlement при сбоях.

## Рекомендации для решения:
* Введение механизма событий (Event-Driven) для обновления локальных данных о продуктах.
* Добавить механизм повторных запросов и управления сбоями для взаимодействия с API страховых компаний, используем паттерны Retry, Circuit Breaker.
* Использование брокера сообщений (Kafka, RabbitMQ, ActiveMQ) для асинхронной передачи данных. 
* Данные от страховых получаются обрабатываются асинхронно и публикуются в топики.
  ins-product-aggregator публикует обновления продуктов в очередь сообщений, доступную для всех сервисов.
  Реализовать кэширование часто запрашиваемых данных в ins-product-aggregator.
* Обновление реплик core-app и ins-comp-settlement на основе сообщений, а не по расписанию. 
  Сервисы core-app и ins-comp-settlement подписываются на события обновления данных и обновляют локальные реплики.